(this["webpackJsonpchef-edit"]=this["webpackJsonpchef-edit"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(9),c=n.n(i),a=(n(14),n(15),n(4)),l=n.n(a),s=n(6),u=n(2),f=n(0);function d(e){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),r=n[0],i=n[1];return Object(f.jsxs)("div",{className:"MenuCategory",onClick:function(){return i((function(e){return!e}))},onMouseLeave:function(){return i(!1)},children:[Object(f.jsx)("span",{children:e.name}),r?Object(f.jsx)("ul",{children:e.children}):null]})}n(18);function b(e){return Object(f.jsx)("li",{onClick:e.callback,children:e.name})}var h=n(3);function j(){return Array(300).fill(0)}var g=Object(o.createContext)({leftClickPressed:!1,rightClickPressed:!1,foregroundVisible:!0,leftClickTileId:0,rightClickTileId:0,foregroundTiles:j(),backgroundTiles:j(),levelData:new ArrayBuffer(0),mobs:new Array,setLeftClickPressed:function(e){throw new Error("Editor State Context not found")},setRightClickPressed:function(e){throw new Error("Editor State Context not found")},toggleForegroundVisible:function(){throw new Error("Editor State Context not found")},setLeftClickTileId:function(e){throw new Error("Editor State Context not found")},setRightClickTileId:function(e){throw new Error("Editor State Context not found")},setLevelData:function(e){throw new Error("Editor State Context not found")},setForegroundTiles:function(e){throw new Error("Editor State Context not found")},setBackgroundTiles:function(e){throw new Error("Editor State Context not found")},setMobs:function(e){throw new Error("Editor State Context not found")},placeForegroundTileAtIndex:function(e,t){throw new Error("Editor State Context not found")},placeBackgroundTileAtIndex:function(e,t){throw new Error("Editor State Context not found")},pickTile:function(e){throw new Error("Editor State Context not found")}});function p(){return Object(o.useContext)(g)}function m(e){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),r=n[0],i=n[1],c=Object(o.useState)(!1),a=Object(u.a)(c,2),l=a[0],s=a[1],d=Object(o.useState)(!0),b=Object(u.a)(d,2),p=b[0],m=b[1],O=Object(o.useState)(0),x=Object(u.a)(O,2),k=x[0],T=x[1],v=Object(o.useState)(0),C=Object(u.a)(v,2),w=C[0],y=C[1],S=Object(o.useState)(j()),P=Object(u.a)(S,2),A=P[0],E=P[1],F=Object(o.useState)(j()),I=Object(u.a)(F,2),L=I[0],M=I[1],N=Object(o.useState)(new ArrayBuffer(0)),B=Object(u.a)(N,2),D=B[0],R=B[1],U=Object(o.useState)([]),V=Object(u.a)(U,2),H=V[0],X=V[1];function G(e,t){E((function(n){return[].concat(Object(h.a)(n.slice(0,e)),[t],Object(h.a)(n.slice(e+1)))}))}function J(e,t){M((function(n){return[].concat(Object(h.a)(n.slice(0,e)),[t],Object(h.a)(n.slice(e+1)))}))}function W(e){T(e)}var Y=Object(o.useMemo)((function(){return{leftClickPressed:r,rightClickPressed:l,foregroundVisible:p,leftClickTileId:k,rightClickTileId:w,foregroundTiles:L,backgroundTiles:A,levelData:D,mobs:H,setLeftClickPressed:i,setRightClickPressed:s,toggleForegroundVisible:function(){return m((function(e){return!e}))},setLeftClickTileId:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return T(e)})),setRightClickTileId:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(e)})),setLevelData:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return R(e)})),setForegroundTiles:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return M(e)})),setBackgroundTiles:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return E(e)})),setMobs:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return X(e)})),placeForegroundTileAtIndex:J,placeBackgroundTileAtIndex:G,pickTile:W}}),[r,l,p,k,w,L,A,D,H]);return Object(f.jsx)(g.Provider,{value:Y,children:e.children})}function O(e){if(!e.shown)return null;return Object(f.jsx)("div",{className:"FileLoadBackdrop",onClick:e.onDismiss,children:Object(f.jsx)("div",{className:"FileLoadModal",onClick:function(e){return e.stopPropagation()},children:Object(f.jsxs)("form",{onSubmit:function(t){var n=t.currentTarget.elements.fileInput.files;(null===n||void 0===n?void 0:n.length)&&e.onConfirm(n[0]),t.stopPropagation(),t.preventDefault()},children:[Object(f.jsx)("div",{children:Object(f.jsx)("input",{name:"fileInput",type:"file"})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{type:"submit",children:"Load into editor"}),Object(f.jsx)("button",{onClick:e.onDismiss,children:"Cancel"})]})]})})})}function x(e){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.readAsArrayBuffer(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){for(var t=new Uint16Array(e.slice(88,688)),n=[],o=0;o<300;o++)n.push(t[o]);return n}function v(e){for(var t=new Uint16Array(e.slice(756,1356)),n=[],o=0;o<300;o++)n.push(t[o]);return n}function C(e,t){return new Uint8Array(e.slice(t,t+1))[0]}function w(e,t){return new Int32Array(e.slice(t,t+4))[0]}function y(e,t){return new Float32Array(e.slice(t,t+4))[0]}function S(e,t){for(var n=new Uint8Array(e),o=t;o<e.byteLength&&0!==n[o];)o++;return(new TextDecoder).decode(new Uint8Array(e.slice(t,o)))}function P(e){for(var t=[],n=e.slice(1360),o=C(n,0),r=4;t.length<o&&r<n.byteLength;){var i=r,c=y(n,r),a=y(n,r+=4),l=w(n,r+=4),s=S(n,r+=4),u=C(n,r+=s.length+1);r+=4;for(var f=[],d=0;d<u;d++){var b=y(n,r),h=y(n,r+=4);r+=4,f.push({x:b,y:h})}r+=4;var j=C(n,r+=4),g=C(n,r+=4);r+=4;var p=null,m=null;1&g&&(p=C(n,r),r+=4),16&g&&(m=y(n,r),r+=4),t.push({id:t.length+1,rawData:new Uint8Array(n.slice(i,r)),unknown1:p,unknown2:m,startingCoordinates:{x:c,y:a},flippedH:-1===l,name:s,pathCoordinates:f,spawnFromMob:j})}return t}function A(){var e=p(),t=e.toggleForegroundVisible,n=e.setLevelData,r=e.setForegroundTiles,i=e.setBackgroundTiles,c=e.setMobs,a=Object(o.useState)(!1),h=Object(u.a)(a,2),j=h[0],g=h[1];function m(){return(m=Object(s.a)(l.a.mark((function e(t){var o,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,x(t);case 3:o=e.sent,r(v(o)),i(T(o)),a=P(o),console.log(a),c(a),n(o),g(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsxs)("div",{className:"HeaderBar",children:[Object(f.jsxs)(d,{name:"file",children:[Object(f.jsx)(b,{name:"New",callback:function(){return console.log("new file")}}),Object(f.jsx)(b,{name:"Open",callback:function(){return g(!0)}}),Object(f.jsx)(b,{name:"Save",callback:function(){return console.log("save file")}})]}),Object(f.jsxs)(d,{name:"edit",children:[Object(f.jsx)(b,{name:"Cut",callback:function(){return console.log("cut")}}),Object(f.jsx)(b,{name:"Copy",callback:function(){return console.log("copy")}}),Object(f.jsx)(b,{name:"Paste",callback:function(){return console.log("paste")}})]}),Object(f.jsx)(d,{name:"view",children:Object(f.jsx)(b,{name:"Switch Layer",callback:t})}),Object(f.jsx)(O,{shown:j,onConfirm:function(e){return m.apply(this,arguments)},onDismiss:function(){return g(!1)}})]})}var E=["Empty tile","The left edge of a platform","The middle of a platform","The right edge of a platform","A single brick","A decorative brick","Tileable floor","The left edge of a platform","The middle of a platform","The middle of a platform","The right edge of a platform","A solid on top platform","A single brick","The left edge of a block","The right edge of a block","The left edge of a block","The right edge of a block","The left edge of a block","The right edge of a block","The top edge of a block","The left edge of a block","The right edge of a block","A solid on top platform","The left edge of a block","The right edge of a block","The left edge of a block","The right edge of a block","A solid on top platform","The left edge of a platform","The middle of a platform","The right edge of a platform","The left edge of a platform","The middle of a platform","The middle of a platform","The right edge of a platform","????","????","????","????","The bottom edge of a block","The left edge of a platform","The middle of a platform","The right edge of a platform","The left edge of a platform","The middle of a platform","The right edge of a platform","The left edge of a platform","The middle of a platform","The right edge of a platform","The left edge of a platform","The middle of a platform","The right edge of a platform","A dissolving platform","A dissolving platform","A dissolving platform","A dissolving platform","A dissolving platform","A dissolving platform","????","????","Banana item","Grape item","Cherry item","Watermelon item","Peach item","????","????"];n(19);function F(){return Array(340).fill(0).map((function(e,t){return function(e){return{id:e,xOffset:e%16*-32,yOffset:-32*Math.floor(e/16),description:e<E.length?E[e]:""}}(t)}))}function I(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(!0),c=Object(u.a)(i,2),a=c[0],l=c[1],s=p(),d=s.leftClickTileId,b=s.rightClickTileId,h=s.setLeftClickTileId,j=s.setRightClickTileId;function g(e,t){0===e.button?h(t):2===e.button&&j(t),e.preventDefault(),e.stopPropagation()}return Object(o.useEffect)((function(){r(F())}),[]),Object(f.jsxs)("div",{className:"BlockPalette",style:{left:a?0:"-15rem"},children:[Object(f.jsx)("ul",{children:n.map((function(e){var t="";return d===e.id?(t="LeftClick",b===e.id&&(t="LeftRightClick")):b===e.id&&(t="RightClick"),Object(f.jsxs)("li",{className:t,onClick:function(t){return g(t,e.id)},onContextMenu:function(t){return g(t,e.id)},children:[Object(f.jsx)("div",{className:"BlockImage",style:{backgroundPositionX:"".concat(e.xOffset,"px"),backgroundPositionY:"".concat(e.yOffset,"px")}}),Object(f.jsx)("div",{className:"BlockDescription",children:e.description})]},e.id)}))}),Object(f.jsx)("div",{className:"CollapseBlockPalette",onClick:function(){return l((function(e){return!e}))},children:a?"<":">"})]})}n(20);function L(e){var t=e.mob,n="M ".concat(t.startingCoordinates.x," ").concat(t.startingCoordinates.y),o=t.pathCoordinates.map((function(e){return"L ".concat(e.x," ").concat(e.y)})),r=[n].concat(Object(h.a)(o)).join(" ");return Object(f.jsxs)(f.Fragment,{children:[r.length>1&&Object(f.jsx)("svg",{width:"640",height:"480",className:"MobPath",children:Object(f.jsx)("path",{fill:"none",stroke:"#FF00FF",strokeWidth:"2",d:r})}),Object(f.jsx)("div",{className:"Mob",style:{left:t.startingCoordinates.x,bottom:480-t.startingCoordinates.y},children:Object(f.jsx)("img",{src:"".concat("/ChefEdit","/img/").concat(t.name,".gif"),style:t.flippedH?{transform:"scaleX(-1)"}:{},alt:t.name})}),t.pathCoordinates.map((function(e){return Object(f.jsx)("div",{className:"Mob",style:{opacity:.5,left:e.x,bottom:480-e.y},children:Object(f.jsx)("img",{src:"".concat("/ChefEdit","/img/").concat(t.name,".gif"),style:t.flippedH?{transform:"scaleX(-1)"}:{},alt:t.name})})}))]})}function M(e){var t=p(),n=t.leftClickPressed,o=t.rightClickPressed,r=t.leftClickTileId,i=t.rightClickTileId,c=t.setLeftClickPressed,a=t.setRightClickPressed;return Object(f.jsx)("div",{className:"TileGrid",children:e.tiles.map((function(t,l){var s=function(e){return{xOffset:e%16*-32,yOffset:-32*Math.floor(e/16)}}(t);return Object(f.jsx)("div",{className:"Tile",style:{backgroundPositionX:s.xOffset,backgroundPositionY:s.yOffset},onMouseDown:function(t){return function(t,n){n.stopPropagation(),n.preventDefault(),0===n.button?(c(!0),a(!1),e.onTilePlaced(t,r)):1===n.button?(c(!1),a(!1),e.onTilePicked(e.tiles[t])):2===n.button&&(c(!1),a(!0),e.onTilePlaced(t,i))}(l,t)},onMouseMove:function(t){return function(t,c){n?e.onTilePlaced(t,r):o&&e.onTilePlaced(t,i),c.stopPropagation(),c.preventDefault()}(l,t)}},l)}))})}function N(){var e=p(),t=e.foregroundVisible,n=e.toggleForegroundVisible,o=e.backgroundTiles,r=e.foregroundTiles,i=e.placeBackgroundTileAtIndex,c=e.placeForegroundTileAtIndex,a=e.pickTile,l=e.mobs;return Object(f.jsx)("div",{className:"LevelEditor",children:Object(f.jsxs)("div",{className:"TileGridHolder",children:[Object(f.jsx)(M,{tiles:o,onTilePicked:a,onTilePlaced:i}),t?Object(f.jsx)(M,{tiles:r,onTilePicked:a,onTilePlaced:c}):null,Object(f.jsxs)("div",{className:"LayerTab",onClick:n,style:{backgroundColor:t?"#6888e8":"#e09038"},children:["Editing: ",t?"Foreground":"Background"]}),l.map((function(e){return Object(f.jsx)(L,{mob:e},e.id)}))]})})}function B(e){var t=e.mob;return Object(f.jsxs)("li",{children:[Object(f.jsx)("div",{children:t.name}),Object(f.jsx)("div",{children:"Starting Coordinates"}),Object(f.jsxs)("div",{children:[t.startingCoordinates.x,", ",t.startingCoordinates.y]}),Object(f.jsxs)("div",{children:["Unknown1: ",t.unknown1]}),Object(f.jsxs)("div",{children:["Unknown2: ",t.unknown2]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"checkbox",disabled:!0,checked:!!t.flippedH})," Flipped horizontally?"]}),Object(f.jsx)("div",{children:"Path Coordinates"}),Object(f.jsx)("div",{children:t.pathCoordinates.map((function(e){return Object(f.jsxs)("div",{children:[e.x,", ",e.y]})}))})]})}n(21);function D(){var e=Object(o.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],i=p().mobs;return Object(f.jsxs)("div",{className:"MobSidebar",style:{right:n?0:"-15rem"},children:[Object(f.jsx)("ul",{children:i.map((function(e){return Object(f.jsx)(B,{mob:e},e.id)}))}),Object(f.jsx)("div",{className:"CollapseMobSidebar",onClick:function(){return r((function(e){return!e}))},children:n?">":"<"})]})}var R=function(){var e=p(),t=e.setLeftClickPressed,n=e.setRightClickPressed;return Object(f.jsxs)("div",{className:"App",onMouseUp:function(){t(!1),n(!1)},onContextMenu:function(e){e.stopPropagation(),e.preventDefault()},children:[Object(f.jsx)(A,{}),Object(f.jsxs)("div",{className:"ContentContainer",children:[Object(f.jsx)(I,{}),Object(f.jsx)(N,{}),Object(f.jsx)(D,{})]})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),o(e),r(e),i(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(m,{children:Object(f.jsx)(R,{})})}),document.getElementById("root")),U()}],[[22,1,2]]]);
//# sourceMappingURL=main.e3ebafe3.chunk.js.map